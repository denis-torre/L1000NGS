{% extends 'base.html' %}

<!-- Title -->
{% block title %} L1000NGS {% endblock %}

<!-- Head -->
{% block head %}
<style>
    iframe {
        border: none !important;
        min-height: 1000px;
    }
</style>
{% endblock %}

<!-- Content -->
{% block content %}
<div class="mt-5" style="width: 1200px;">

    <button type="submit" form="download-form" target="_blank" class="btn btn-primary results d-none">Download Notebook</button>

    <iframe id="example-iframe" class="w-100" style="max-width: 1500px;" onload="iframeHeight('example-iframe');" src="{{ url_for('static', filename='notebooks/l1000ngs-sample.html', _external=True) }}">
    </iframe>

    <iframe id="iframe" name="notebook-iframe" class="w-100 results" onload="load_message();" style="max-width: 1500px;" src="{{ url_for('static', filename='notebooks/l1000ngs-sample.html', _external=True) }}">
    </iframe>

    <!-- Generate Notebook Form -->
    <form id="notebook-form" action="{{ url_for('notebook_api') }}" method="post" target="notebook-iframe">
        <input name="request_type" type="hidden" value="html">
        <input name="rids" type="hidden" value="{{ rids }}">
    </form>

    <!-- Download Notebook Form -->
    <form id="download-form" action="{{ url_for('notebook_api') }}" method="post">
        <input name="request_type" type="hidden" value="ipynb">
        <input name="rids" type="hidden" value="{{ rids }}">
    </form>

</div>


{% endblock %}

<!-- Footer -->
{% block footer %}
<script>

    // Fix iframe height
    function iframeHeight(id) {
        var iFrameID = document.getElementById(id);
        if (iFrameID) {
            // here you can make the height, I delete it first, then I make it again
            iFrameID.height = "";
            iFrameID.height = (iFrameID.contentWindow.document.body.scrollHeight + 50) + "px";
        }   
    }




// Load message
// function load_message() {
//     // Toggle results
//     $('.results').toggleClass('d-none');

// }

// Submit form
$(function(){


})
</script>
{% endblock %}